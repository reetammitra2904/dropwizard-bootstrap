plugins {
    id 'idea'
    id 'java-library'
    id 'application'
    id 'com.github.johnrengelman.shadow' version '6.1.0'
}

def DROPWIZARD_VERSION = '2.0.19'
def runnableClassName = 'helloworld.HelloWorldApplication'

// an error in build if not assigned (possibly a bug)
mainClassName = runnableClassName

repositories {
    mavenCentral()
}

dependencies {
    implementation "io.dropwizard:dropwizard-core:${DROPWIZARD_VERSION}"
}

jar {
    manifest {
        attributes "Main-class": runnableClassName
    }
    duplicatesStrategy DuplicatesStrategy.INCLUDE
    from {
        configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }
    }
}

application {
    mainClass.set(runnableClassName)
}
